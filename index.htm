<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>Book Design System</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">

<style>
body{margin:0;font-family:sans-serif;height:100vh;display:flex;flex-direction:column}
header{background:#1e40af;color:#fff;padding:10px;display:flex;align-items:center}
header input{margin-left:10px;padding:5px;font-size:16px;width:100%}
main{flex:1;display:flex}
#chapters{width:260px;background:#f3f4f6;padding:10px;overflow-y:auto}
.chapter{background:#fff;padding:8px;margin-bottom:5px;border-radius:4px;cursor:pointer}
.chapter.active{background:#dbeafe}
.chapter small{float:right;color:red;cursor:pointer}
#editor{flex:1}
footer{text-align:center;font-size:12px;padding:5px;background:#e5e7eb}
button{width:100%;margin-bottom:8px}
</style>
</head>

<body>

<header>
  üìò <input id="bookTitle" placeholder="‡§¨‡•Å‡§ï‡§ï‡•ã ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï ‡§≤‡•á‡§ñ‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç">
</header>

<main>
  <div id="chapters">
    <button onclick="addChapter()">+ ‡§®‡§Ø‡§æ‡§Å ‡§Ö‡§ß‡•ç‡§Ø‡§æ‡§Ø</button>
    <div id="chapterList"></div>
  </div>
  <div id="editor"></div>
</main>

<footer>‚úî Auto-Saved (Local)</footer>

<script src="https://cdn.quilljs.com/1.3.7/quill.js"></script>
<script>
const quill = new Quill('#editor',{theme:'snow'});

let book = JSON.parse(localStorage.getItem('book')) || {
  title:'',
  chapters:[],
  current:null
};

document.getElementById('bookTitle').value = book.title;

document.getElementById('bookTitle').oninput = e=>{
  book.title = e.target.value;
  save();
};

function save(){
  localStorage.setItem('book',JSON.stringify(book));
}

function addChapter(){
  const t = prompt("‡§Ö‡§ß‡•ç‡§Ø‡§æ‡§Ø ‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï:");
  if(!t) return;
  const c={id:Date.now(),title:t,content:''};
  book.chapters.push(c);
  book.current=c.id;
  save(); render(); load(c.id);
}

function deleteChapter(id){
  if(!confirm("‡§π‡§ü‡§æ‡§â‡§®‡•á?")) return;
  book.chapters = book.chapters.filter(c=>c.id!==id);
  if(book.current===id) book.current=null;
  save(); render(); quill.setText('');
}

function render(){
  const list=document.getElementById('chapterList');
  list.innerHTML='';
  book.chapters.forEach(c=>{
    const d=document.createElement('div');
    d.className='chapter'+(c.id===book.current?' active':'');
    d.innerHTML=`${c.title} <small onclick="deleteChapter(${c.id})">‚úñ</small>`;
    d.onclick=()=>load(c.id);
    list.appendChild(d);
  });
}

function load(id){
  const c=book.chapters.find(x=>x.id===id);
  if(!c) return;
  book.current=id;
  quill.root.innerHTML=c.content;
  render();
}

quill.on('text-change',()=>{
  const c=book.chapters.find(x=>x.id===book.current);
  if(!c) return;
  c.content=quill.root.innerHTML;
  save();
});

render();
if(book.current) load(book.current);
</script>

</body>
</html>
