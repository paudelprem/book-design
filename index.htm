<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Book Editor</title>
<link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
<style>
body{margin:0;font-family:sans-serif;height:100vh;display:flex}
#left{width:220px;background:#f1f5f9;padding:10px}
#right{flex:1}
button{width:100%;margin-bottom:6px}
.chapter{background:#fff;padding:6px;margin-bottom:4px;cursor:pointer}
</style>
</head>
<body>

<div id="left">
<button onclick="addChapter()">+ Chapter</button>
<div id="list"></div>
</div>

<div id="right">
<div id="editor"></div>
</div>

<script src="https://cdn.quilljs.com/1.3.7/quill.js"></script>
<script>
const q=new Quill('#editor',{theme:'snow'});
let data=JSON.parse(localStorage.getItem('b'))||{c:[],i:null};

function save(){localStorage.setItem('b',JSON.stringify(data));}
function addChapter(){
 const t=prompt("Chapter name");
 if(!t)return;
 const c={id:Date.now(),t,html:""};
 data.c.push(c);data.i=c.id;save();draw();load(c.id);
}
function draw(){
 list.innerHTML="";
 data.c.forEach(x=>{
  const d=document.createElement("div");
  d.className="chapter";d.innerText=x.t;
  d.onclick=()=>load(x.id);
  list.appendChild(d);
 });
}
function load(id){
 const c=data.c.find(x=>x.id===id);
 if(!c)return;
 data.i=id;q.root.innerHTML=c.html;
}
q.on('text-change',()=>{
 const c=data.c.find(x=>x.id===data.i);
 if(!c)return;
 c.html=q.root.innerHTML;save();
});
draw();
</script>

</body>
</html>

